# TAT-QAæ•°æ®é›†åˆ†ææŠ¥å‘Š

## ï¿½ï¿½ æ•°æ®é›†æ¦‚è§ˆ

### å®Œæ•´æ•°æ®é›†ç»Ÿè®¡ï¼ˆåŸºäº`answer_from`å­—æ®µï¼‰
- **æ€»æ ·æœ¬æ•°**: 16,546
- **è¡¨æ ¼ç­”æ¡ˆï¼ˆtableï¼‰**: 7,428 (44.9%)
- **è¡¨æ ¼+æ–‡æœ¬ç­”æ¡ˆï¼ˆtable-textï¼‰**: 5,223 (31.6%)
- **æ–‡æœ¬ç­”æ¡ˆï¼ˆtextï¼‰**: 3,895 (23.5%)

### æ–‡ä»¶åˆ†å¸ƒ
1. **è®­ç»ƒé›†** (`evaluate_mrr/tatqa_train_qc_enhanced.jsonl`)
   - æ ·æœ¬æ•°: 14,883
   - è¡¨æ ¼ç­”æ¡ˆ: 6,692 (45.0%)
   - è¡¨æ ¼+æ–‡æœ¬ç­”æ¡ˆ: 4,677 (31.4%)
   - æ–‡æœ¬ç­”æ¡ˆ: 3,514 (23.6%)

2. **è¯„ä¼°é›†** (`evaluate_mrr/tatqa_eval_enhanced.jsonl`)
   - æ ·æœ¬æ•°: 1,663
   - è¡¨æ ¼ç­”æ¡ˆ: 736 (44.3%)
   - è¡¨æ ¼+æ–‡æœ¬ç­”æ¡ˆ: 546 (32.8%)
   - æ–‡æœ¬ç­”æ¡ˆ: 381 (22.9%)

## ğŸ”§ æµ‹è¯•æ•°æ®é›†åˆ›å»º

### æµ‹è¯•æ•°æ®é›†ç»„æˆ (15ä¸ªæ ·æœ¬)
- **è¡¨æ ¼ç­”æ¡ˆ**: 7ä¸ªæ ·æœ¬
- **è¡¨æ ¼+æ–‡æœ¬ç­”æ¡ˆ**: 0ä¸ªæ ·æœ¬
- **æ–‡æœ¬ç­”æ¡ˆ**: 8ä¸ªæ ·æœ¬
- **æ–‡ä»¶ä½ç½®**: `evaluate_mrr/tatqa_test_15_samples.jsonl`

### æ ·æœ¬ç¤ºä¾‹
1. **è¡¨æ ¼ç­”æ¡ˆç¤ºä¾‹**:
   - é—®é¢˜: "What was the accumulated amortization of fiscal years 2018 and 2019, respectively?"
   - ç­”æ¡ˆ: "$212.1; $260.8"
   - answer_from: table

2. **æ–‡æœ¬ç­”æ¡ˆç¤ºä¾‹**:
   - é—®é¢˜: "What was the income tax benefit related to share-based compensation in 2019?"
   - ç­”æ¡ˆ: "$1.8 million"
   - answer_from: text

## ğŸ“ˆ å…³é”®å‘ç°

### 1. ç­”æ¡ˆæ¥æºç±»å‹åˆ†å¸ƒï¼ˆanswer_fromï¼‰
- **è¡¨æ ¼ç­”æ¡ˆï¼ˆtableï¼‰å ä¸»å¯¼**: 44.9%
- **è¡¨æ ¼+æ–‡æœ¬ç­”æ¡ˆï¼ˆtable-textï¼‰**: 31.6%
- **æ–‡æœ¬ç­”æ¡ˆï¼ˆtextï¼‰**: 23.5%

### 2. æ•°æ®è´¨é‡
- **æ— æœªçŸ¥ç±»å‹**: æ‰€æœ‰æ ·æœ¬éƒ½èƒ½æ­£ç¡®åˆ†ç±»
- **æ ¼å¼ä¸€è‡´**: æ‰€æœ‰æ–‡ä»¶éƒ½ä½¿ç”¨JSONLæ ¼å¼
- **å­—æ®µå®Œæ•´**: åŒ…å«queryã€contextã€answerã€doc_idã€answer_fromç­‰å¿…è¦å­—æ®µ

### 3. æ•°æ®é›†ç‰¹ç‚¹
- **è®­ç»ƒé›†**: 14,883ä¸ªæ ·æœ¬ï¼Œè¡¨æ ¼ç­”æ¡ˆå 45.0%ï¼Œè¡¨æ ¼+æ–‡æœ¬å 31.4%ï¼Œæ–‡æœ¬ç­”æ¡ˆå 23.6%
- **è¯„ä¼°é›†**: 1,663ä¸ªæ ·æœ¬ï¼Œè¡¨æ ¼ç­”æ¡ˆå 44.3%ï¼Œè¡¨æ ¼+æ–‡æœ¬å 32.8%ï¼Œæ–‡æœ¬ç­”æ¡ˆå 22.9%
- **åˆ†å¸ƒä¸€è‡´æ€§**: è®­ç»ƒé›†å’Œè¯„ä¼°é›†çš„ç­”æ¡ˆæ¥æºç±»å‹åˆ†å¸ƒéå¸¸ç›¸ä¼¼ï¼Œè¯´æ˜æ•°æ®åˆ’åˆ†åˆç†

### 4. answer_fromå­—æ®µè¯´æ˜
- **table**: ç­”æ¡ˆå®Œå…¨æ¥è‡ªè¡¨æ ¼
- **text**: ç­”æ¡ˆå®Œå…¨æ¥è‡ªæ–‡æœ¬æ®µè½
- **table-text**: ç­”æ¡ˆéœ€è¦åŒæ—¶ç»“åˆè¡¨æ ¼å’Œæ–‡æœ¬å†…å®¹
- **åˆ†å¸ƒè¯´æ˜**: å¤§å¤šæ•°æ ·æœ¬ç­”æ¡ˆæ¥æºäºå•ä¸€ç±»å‹ï¼Œæ··åˆå‹å æ¯”çº¦ä¸‰åˆ†ä¹‹ä¸€

## ğŸš€ ä»£ç ä¿®æ”¹æ€»ç»“

### 1. åˆ›å»ºæµ‹è¯•æ•°æ®é›†è„šæœ¬
- å®ç°äº†åŸºäºanswer_fromå­—æ®µçš„ç±»å‹åˆ†ç±»åŠŸèƒ½
- æ”¯æŒå¹³è¡¡é‡‡æ ·ï¼ˆè¡¨æ ¼/æ–‡æœ¬/æ··åˆé—®é¢˜ï¼‰
- ç”Ÿæˆ15ä¸ªæ ·æœ¬çš„æµ‹è¯•æ•°æ®é›†

### 2. ä¿®æ”¹è¯„ä¼°è„šæœ¬
- æ·»åŠ äº† `--test` å‚æ•°æ”¯æŒæµ‹è¯•æ•°æ®é›†
- ä¿®æ”¹äº† `load_evaluation_data()` æ–¹æ³•æ”¯æŒä¸åŒæ•°æ®æº
- æ›´æ–°äº† `run_comprehensive_evaluation()` æ–¹æ³•

### 3. æ•°æ®é›†åˆ†æè„šæœ¬
- è‡ªåŠ¨å‘ç°å’Œåˆ†ææ‰€æœ‰TAT-QAæ•°æ®æ–‡ä»¶
- ç”Ÿæˆè¯¦ç»†çš„ç»Ÿè®¡æŠ¥å‘Šï¼Œæ”¯æŒanswer_fromç±»å‹
- æ”¯æŒå¤šç§æ–‡ä»¶è·¯å¾„æ ¼å¼

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. å¿«é€Ÿæµ‹è¯•
```bash
python comprehensive_evaluation_enhanced.py --test
```

### 2. å®Œæ•´è¯„ä¼°
```bash
python comprehensive_evaluation_enhanced.py --n 100
```

### 3. æ•°æ®é›†åˆ†æ
```bash
python tatqa_analysis_tools/analyze_answer_types.py evaluate_mrr/tatqa_train_qc_enhanced.jsonl
python tatqa_analysis_tools/analyze_answer_types.py evaluate_mrr/tatqa_eval_enhanced.jsonl
python tatqa_analysis_tools/analyze_answer_types.py evaluate_mrr/tatqa_test_15_samples.jsonl
```

## ğŸ“‹ æ–‡ä»¶æ¸…å•

### æ–°åˆ›å»ºçš„æ–‡ä»¶
- `tatqa_analysis_tools/create_balanced_test_dataset.py` - æµ‹è¯•æ•°æ®é›†åˆ›å»ºè„šæœ¬
- `tatqa_analysis_tools/analyze_answer_types.py` - æ•°æ®é›†åˆ†æè„šæœ¬
- `evaluate_mrr/tatqa_test_15_samples.jsonl` - 15æ ·æœ¬æµ‹è¯•æ•°æ®é›†
- `tatqa_analysis_tools/TAT_QA_Dataset_Analysis_Report.md` - æœ¬æŠ¥å‘Š

### ä¿®æ”¹çš„æ–‡ä»¶
- `comprehensive_evaluation_enhanced.py` - æ·»åŠ æµ‹è¯•æ•°æ®é›†æ”¯æŒ
- `data_process/convert_tatqa_to_qca_enhanced.py` - ä¿ç•™answer_fromå­—æ®µ

## ğŸ¯ ç»“è®º

1. **ç»Ÿè®¡å£å¾„ç»Ÿä¸€**: æœ¬æŠ¥å‘Šæ‰€æœ‰åˆ†å¸ƒå‡åŸºäº`answer_from`å­—æ®µï¼ˆå³ç­”æ¡ˆæ¥æºç±»å‹ï¼‰ï¼Œè€Œécontextå†…å®¹ç»“æ„
2. **æ•°æ®é›†å¹³è¡¡æ€§**: TAT-QAæ•°æ®é›†åœ¨è¡¨æ ¼å’Œæ–‡æœ¬ç­”æ¡ˆä¹‹é—´æœ‰ä¸€å®šçš„ä¸å¹³è¡¡ï¼Œè¡¨æ ¼ç­”æ¡ˆå ä¸»å¯¼åœ°ä½ï¼ˆçº¦45%ï¼‰ï¼Œä½†ä¹ŸåŒ…å«å¤§é‡è¡¨æ ¼+æ–‡æœ¬æ··åˆç­”æ¡ˆï¼ˆ31.6%ï¼‰
3. **æµ‹è¯•è¦†ç›–**: åˆ›å»ºçš„15æ ·æœ¬æµ‹è¯•æ•°æ®é›†æä¾›äº†è‰¯å¥½çš„ç­”æ¡ˆç±»å‹è¦†ç›–
4. **å·¥å…·å®Œå–„**: æä¾›äº†å®Œæ•´çš„åˆ†æã€åˆ›å»ºå’Œè¯„ä¼°å·¥å…·é“¾
5. **å®ç”¨æ€§**: æ”¯æŒå¿«é€Ÿæµ‹è¯•å’Œå®Œæ•´è¯„ä¼°ä¸¤ç§æ¨¡å¼ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚

æœ¬åˆ†æä¸ºTAT-QAæ•°æ®é›†çš„æ·±å…¥ç ”ç©¶å’Œæ¨¡å‹è¯„ä¼°æä¾›äº†åšå®çš„åŸºç¡€ã€‚ 